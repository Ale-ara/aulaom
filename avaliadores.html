<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OM - Form</title>
    <link href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Hanken+Grotesk:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="icon" href="https://i.imgur.com/SZ4dodg.gif">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            margin: 0;
            min-height: 100vh;
            color: #fff;
            background: linear-gradient(120deg, #232016 0%, #2d271a 60%, #3a2e13 100%);
            background-attachment: fixed;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 0;
            background: repeating-linear-gradient(135deg, rgba(196, 164, 83, 0.04) 0 2px, transparent 2px 40px),
                radial-gradient(circle at 80% 10%, rgba(255, 220, 120, 0.08) 0, rgba(255, 255, 255, 0) 60%),
                radial-gradient(circle at 20% 80%, rgba(196, 164, 83, 0.07) 0, rgba(255, 255, 255, 0) 70%);
            mix-blend-mode: lighten;
        }

        .container {
            max-width: 900px;
            margin: 60px auto 40px auto;
            padding: 32px 24px;
            background: rgba(30, 27, 20, 0.92);
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.35);
            display: flex;
            flex-wrap: wrap;
            gap: 32px;
            border: 1.5px solid #c4a453;
            position: relative;
        }

        .form-left,
        .form-right {
            flex: 1;
            min-width: 320px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
            color: #c4a453;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 2px solid #c4a45333;
            background: rgba(255, 255, 255, 0.13);
            color: #fff;
            outline: none;
            font-size: 16px;
            transition: all 0.3s;
        }

        input[type="text"]:focus,
        textarea:focus {
            background: rgba(255, 255, 255, 0.18);
            border-color: #c4a453;
            box-shadow: 0 0 10px #c4a45355;
        }

        textarea {
            resize: vertical;
            min-height: 90px;
            max-height: 300px;
        }

        .add-student {
            display: flex;
            gap: 10px;
        }

        .add-student input {
            flex: 1;
        }

        .student-list {
            margin-top: 18px;
        }

        .student-card {
            background: rgba(255, 255, 255, 0.12);
            padding: 12px 14px;
            margin-bottom: 12px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1.5px solid #c4a45333;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.10);
        }

        .status-button {
            background: #9b8344;
            border: none;
            padding: 6px 10px;
            border-radius: 6px;
            color: white;
            cursor: pointer;
        }

        .status-button.reprovado {
            background: #e74c3c;
        }

        .status-button.caiu {
            background: #f39c12;
        }

.submit-btn {
    background: #9b8344;
    color: white;
    padding: 12px;
    width: 100%;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
.add-student .status-button {
    background: #9b8344;
    border: none;
    padding: 6px 10px;
    border-radius: 6px;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: background 0.2s;
}
.add-student .status-button:hover {
    background: #c4a453;
}
.add-student .status-button i {
    font-size: 1.3em;
    color: #fffbe6;
    filter: drop-shadow(0 1px 0 #c4a45388);
}

        .form-group i {
            margin-right: 7px;
            color: #c4a453;
        }

        select {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 2px solid #c4a45333;
            background-color: rgba(255, 255, 255, 0.13);
            color: white;
            outline: none;
            font-size: 16px;
            transition: all 0.3s;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,<svg fill='%23c4a453' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 22px;
        }

        select:focus {
            background-color: rgba(255, 255, 255, 0.18);
            border-color: #c4a453;
            box-shadow: 0 0 10px #c4a45355;
            transform: scale(1.01);
        }

        select option {
            background-color: #c4a453;
            color: white;
        }

        #loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: linear-gradient(135deg, #232016 0%, #3a2e13 70%, #c4a453 120%);
    background-attachment: fixed;
    z-index: 20000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    box-shadow: 0 0 0 100vmax #1a160e99 inset;
    border-bottom-left-radius: 60px;
    border-bottom-right-radius: 60px;
    border-top: 2.5px solid #c4a45355;
    border-bottom: 2.5px solid #c4a45333;
    animation: loading-fadein 0.7s;
}
#loading-screen::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    z-index: 1;
    background: repeating-linear-gradient(135deg, rgba(196,164,83,0.08) 0 2px, transparent 2px 40px),
                radial-gradient(circle at 80% 10%, rgba(255, 220, 120, 0.13) 0, rgba(255,255,255,0) 60%),
                radial-gradient(circle at 20% 80%, rgba(196,164,83,0.12) 0, rgba(255,255,255,0) 70%);
    filter: blur(0.5px);
}
#loading-screen > * {
    position: relative;
    z-index: 2;
}

        .loading-image {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .loading-image img {
            width: 44px;
            height: 44px;
            opacity: 0.7;
            filter: drop-shadow(0 0 8px #c4a45388);
            animation: bounce 1.5s infinite ease-in-out;
        }

        .loading-image img:nth-child(1) {
            animation-delay: 0s;
        }

        .loading-image img:nth-child(2) {
            animation-delay: 0.3s;
        }

        .loading-image img:nth-child(3) {
            animation-delay: 0.6s;
        }

        @keyframes bounce {

            0%,
            80%,
            100% {
                transform: scale(0.8);
                opacity: 0.2;
            }

            50% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        .loading-text {
            font-size: 22px;
            color: #ffe08a;
            font-family: 'Hanken Grotesk', 'Segoe UI', sans-serif;
            font-weight: 700;
            letter-spacing: 1.5px;
            margin-top: 18px;
            text-shadow: 0 2px 8px #231d0e, 0 1px 0 #c4a45355;
            background: linear-gradient(90deg, #ffe08a 30%, #c4a453 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes loading-fadein {
    from { opacity: 0; transform: translateY(40px); }
    to { opacity: 1; transform: translateY(0); }
}

        .top-navbar {
            position: fixed;
            top: 0;
            width: 100%;
            height: 60px;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(6px);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            z-index: 1000;
        }

        .navbar-logo {
            width: 40px;
            height: auto;
            animation: float 4s ease-in-out infinite;
        }

        .navbar-title {
            font-family: 'Hanken Grotesk', sans-serif;
            font-size: 20px;
            font-weight: bold;
            color: white;
            letter-spacing: 1px;
        }

        .container {
            margin-top: 100px;
        }

        @keyframes float {
            0% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-6px);
            }

            100% {
                transform: translateY(0);
            }
        }


.flatpickr-calendar {
  background: rgba(47, 42, 31, 1);
  border: 1px solid #c4a453;
  color: #ffcc66;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
  border-radius: 25px;
  overflow: hidden;
}

.flatpickr-months {
  background: rgba(30, 27, 20, 0.9);
  color: #c4a453;
  border-top-left-radius: 25px;
  border-top-right-radius: 25px;
  font-weight: bold;
}

.flatpickr-months .flatpickr-month {
  color: #c4a453;
  font-weight: bold;
}

.flatpickr-monthDropdown-months {
  background: transparent !important;   
  color: #c4a453 !important;             
  border: 1px solid #c4a453;           
  font-weight: bold;
  border-radius: 8px;
  padding: 2px 6px;
  cursor: pointer;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}
.flatpickr-monthDropdown-months option {
  background: rgba(47, 42, 31, 0.9);    
  color: #c4a453;
  font-weight: bold;
}

.flatpickr-current-month input.cur-year {
  color: #c4a453;
  background: transparent;
  font-weight: bold;
  border: none;
}

.flatpickr-weekday {
  background: rgba(30, 27, 20, 0.9) !important;
  color: #c4a453 !important;
  font-weight: bold !important;
  user-select: none;
  padding: 5px 0;
  text-align: center;
}

.flatpickr-day {
  color: #ffcc66;
  border-radius: 8px;
  font-weight: bold;
}

.flatpickr-day.selected,
.flatpickr-day.startRange,
.flatpickr-day.endRange {
  background: #c4a453;
  color: black;
}

.flatpickr-day:hover {
  background: #9b8344;
  color: #ffffff;
}

.flatpickr-day.today {
  border: 1px solid #c4a453;
}

.flatpickr-day.flatpickr-disabled,
.flatpickr-day.prevMonthDay,
.flatpickr-day.nextMonthDay {
  color: rgba(255, 255, 255, 0.3);
}

.flatpickr-time {
  background: rgba(30, 27, 20, 0.9);
  border-top: 1px solid #c4a453;
  border-bottom-left-radius: 25px;
  border-bottom-right-radius: 25px;
}

.flatpickr-time input,
.flatpickr-time input:hover,
.flatpickr-time input:focus,
.flatpickr-time input:active {
  background: transparent;
  color: #ffcc66 !important;
  font-weight: bold;
  border: none;
  outline: none;
  caret-color: #ffcc66;
}

.flatpickr-prev-month svg,
.flatpickr-next-month svg {
  fill: #c4a453;
}

@media (max-width: 600px) {
  .flatpickr-calendar {
    min-width: unset !important;
    width: 98vw !important;
    left: 1vw !important;
    right: 1vw !important;
    border-radius: 18px !important;
    font-size: 15px !important;
    box-sizing: border-box !important;
  }
  .flatpickr-days, .flatpickr-innerContainer {
    min-width: unset !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }
  .flatpickr-time {
    flex-wrap: wrap;
    padding: 8px 0;
  }
  .flatpickr-months, .flatpickr-weekdays {
    min-width: unset !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }
  .flatpickr-day {
    min-width: 32px !important;
    max-width: 1fr !important;
    font-size: 1em !important;
  }
}
    
.flatpickr-calendar {
  background: rgba(47, 42, 31, 1);
  border: 1px solid #c4a453;
  color: #ffcc66;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
  border-radius: 25px;
  overflow: hidden;
}

.flatpickr-months {
  background: rgba(30, 27, 20, 0.9);
  color: #c4a453;
  border-top-left-radius: 25px;
  border-top-right-radius: 25px;
  font-weight: bold;
}

.flatpickr-months .flatpickr-month {
  color: #c4a453;
  font-weight: bold;
}

.flatpickr-monthDropdown-months {
  background: transparent !important;  
  color: #c4a453 !important;              
  border: 1px solid #c4a453;       
  font-weight: bold;
  border-radius: 8px;
  padding: 2px 6px;
  cursor: pointer;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}
.flatpickr-monthDropdown-months option {
  background: rgba(47, 42, 31, 0.9);     /* Fundo levemente escuro nas opções */
  color: #c4a453;
  font-weight: bold;
}

.flatpickr-current-month input.cur-year {
  color: #c4a453;
  background: transparent;
  font-weight: bold;
  border: none;
}

.flatpickr-weekday {
  background: rgba(30, 27, 20, 0.9) !important;
  color: #c4a453 !important;
  font-weight: bold !important;
  user-select: none;
  padding: 5px 0;
  text-align: center;
}

.flatpickr-day {
  color: #ffcc66;
  border-radius: 8px;
  font-weight: bold;
}

.flatpickr-day.selected,
.flatpickr-day.startRange,
.flatpickr-day.endRange {
  background: #c4a453;
  color: black;
}

.flatpickr-day:hover {
  background: #9b8344;
  color: #ffffff;
}

/* Hoje */
.flatpickr-day.today {
  border: 1px solid #c4a453;
}

.flatpickr-day.flatpickr-disabled,
.flatpickr-day.prevMonthDay,
.flatpickr-day.nextMonthDay {
  color: rgba(255, 255, 255, 0.3);
}

.flatpickr-time {
  background: rgba(30, 27, 20, 0.9);
  border-top: 1px solid #c4a453;
  border-bottom-left-radius: 25px;
  border-bottom-right-radius: 25px;
}

.flatpickr-time input,
.flatpickr-time input:hover,
.flatpickr-time input:focus,
.flatpickr-time input:active {
  background: transparent;
  color: #ffcc66 !important;
  font-weight: bold;
  border: none;
  outline: none;
  caret-color: #ffcc66;
}

.flatpickr-prev-month svg,
.flatpickr-next-month svg {
  fill: #c4a453;
}

@media (max-width: 600px) {
  .flatpickr-calendar {
    min-width: unset !important;
    width: 98vw !important;
    left: 1vw !important;
    right: 1vw !important;
    border-radius: 18px !important;
    font-size: 15px !important;
    box-sizing: border-box !important;
  }
  .flatpickr-days, .flatpickr-innerContainer {
    min-width: unset !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }
  .flatpickr-time {
    flex-wrap: wrap;
    padding: 8px 0;
  }
  .flatpickr-months, .flatpickr-weekdays {
    min-width: unset !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }
  .flatpickr-day {
    min-width: 32px !important;
    max-width: 1fr !important;
    font-size: 1em !important;
  }
}
    </style>

</head>
<body>
    <nav class="top-navbar">
        <img src="https://www.habbo.com.br/habbo-imaging/badge/b09134s43114s41194f74f3131b8a5c9311558ee0f561db7e0.gif" alt="Logo" class="navbar-logo">
    </nav>

<div id="main-content" style="display: none;">
</div>

<div id="loading-screen">
  <div class="loading-image">
    <img src="https://i.imgur.com/SZ4dodg.gif" alt="Loading Icon 1">
    <img src="https://i.imgur.com/SZ4dodg.gif" alt="Loading Icon 2">
    <img src="https://i.imgur.com/SZ4dodg.gif" alt="Loading Icon 3">
  </div>
  <div class="loading-text">Carregando...</div>
</div>

    </div>
 <div id="telaFormulario">
    <form class="container" onsubmit="enviarFormulario(event)">
        <div class="form-left">
            <div class="form-group">
                <label><i class='bx bx-calendar'></i>Data e hora de início</label>
                <input type="text" id="dataHora" placeholder="Selecione a data e hora">
            </div>

            <div class="form-group">
                <label><i class='bx bx-book-content'></i>Curso</label>
                <select id="curso">
                    <option value="">Selecione a avaliação</option>
                    <option>Avaliação I</option>
                    <option>Avaliação II</option>
                    <option>Avaliação III</option>
                    <option>Avaliação IV</option>
                    <option>Avaliação V</option>
                    <option>Avaliação VI</option>
                </select>
            </div>

            <div class="form-group">
                <label><i class='bx bx-user'></i>Avaliador(a)</label>
                <input type="text" id="conselheiro" placeholder="Seu nickname" />
            </div>

            <div class="form-group">
                <label><i class='bx bx-comment-detail'></i>Observações</label>
                <textarea id="observacoes" placeholder="Insira suas observações sobre a avaliação aplicada..."></textarea>
            </div>
        </div>

        <div class="form-right">
            <div class="form-group">
                <label><i class='bx bx-user-plus'></i>Adicionar aluno</label>
                <div class="add-student">
                    <input type="text" id="nomeAluno" placeholder="Nickname do aluno" />
                    <button type="button" onclick="adicionarAluno()" class="status-button"><i class='bx bx-user-plus'></i></button>
                </div>
            </div>
            <div id="listaAlunos" class="student-list"></div>
        </div>

        <div class="form-group" style="width: 100%">
            <button type="submit" class="submit-btn"><i class='bx bx-save'></i> Postar avaliação</button>
        </div>
    </form>
</div>

<script>
    const listaAlunos = document.getElementById('listaAlunos');
    const inputAluno = document.getElementById('nomeAluno');
    const telaFormulario = document.getElementById('telaFormulario');
    const telaConfirmacao = document.getElementById('telaConfirmacao');

    function adicionarAluno() {
        const nome = inputAluno.value.trim();
        if (!nome) return;

        const card = document.createElement('div');
        card.className = 'student-card';

        const nomeSpan = document.createElement('span');
        nomeSpan.textContent = nome;

        const statusSelect = document.createElement('select');
        statusSelect.className = 'status-select';
        statusSelect.style.marginLeft = '10px';

        ['Aprovado', 'Reprovado', 'Caiu'].forEach(status => {
            const option = document.createElement('option');
            option.value = status;
            option.textContent = status;
            statusSelect.appendChild(option);
        });

        const linkInput = document.createElement('input');
        linkInput.type = 'text';
        linkInput.placeholder = 'Link do print (queda)';
        linkInput.style.display = 'none';
        linkInput.style.marginTop = '10px';
        linkInput.style.width = '100%';

        statusSelect.onchange = () => {
            linkInput.style.display = statusSelect.value === 'Caiu' ? 'block' : 'none';
        };

        const excluirBtn = document.createElement('button');
        excluirBtn.type = 'button';
        excluirBtn.innerHTML = "<i class='bx bx-trash'></i>";
        excluirBtn.style.background = "transparent";
        excluirBtn.style.border = "none";
        excluirBtn.style.color = "white";
        excluirBtn.style.cursor = "pointer";
        excluirBtn.onclick = () => card.remove();

        card.appendChild(nomeSpan);
        card.appendChild(statusSelect);
        card.appendChild(excluirBtn);
        card.appendChild(linkInput);

        listaAlunos.appendChild(card);
        inputAluno.value = '';
    }

    async function enviarFormulario(e) {
        e.preventDefault();

        const dataHora = document.getElementById('dataHora').value;
        const curso = document.getElementById('curso').value;
        const conselheiro = document.getElementById('conselheiro').value;
        const observacoes = document.getElementById('observacoes').value;

        const alunos = Array.from(document.querySelectorAll('.student-card')).map(card => ({
            nome: card.querySelector('span').textContent,
            status: card.querySelector('select').value,
            linkQueda: card.querySelector('input')?.value || ""
        }));

        const payload = {
            "Data e Hora": dataHora,
            "Curso": curso,
            "Conselheiro": conselheiro,
            "Observações": observacoes,
            "Alunos Presentes": alunos.map(aluno => aluno.nome).join(" / "),
            "Aprovados": alunos.filter(aluno => aluno.status === "Aprovado").map(aluno => aluno.nome).join(" / "),
            "Comprovações (Caiu)": alunos.filter(aluno => aluno.status === "Caiu").map(aluno => aluno.linkQueda).join(" / ")
        };

        try {
    const response = await fetch("https://api.sheetmonkey.io/form/5U3SfD92xf36TAtv44TnmD", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    if (response.ok) {
      window.location.href = "https://www.policiarcc.com/t36987-om-relatorios-de-aulas";
    } else {
      alert("Erro ao enviar aula.");
    }
  } catch {
    alert("Erro na conexão.");
  }
}

    window.addEventListener("DOMContentLoaded", () => {
        document.getElementById("dataHora").value = new Date().toLocaleString("pt-BR");
    });
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const loadingScreen = document.getElementById('loading-screen');
    setTimeout(() => {
      loadingScreen.style.opacity = 0;
      loadingScreen.style.pointerEvents = "none";
      setTimeout(() => loadingScreen.remove(), 500);
    }, 1500);
  });

if (response.ok) {
  telaFormulario.style.display = 'none';
  acoesContainer.style.display = 'block';
} else {
  alert("Erro ao enviar aula.");
}
</script>
</body>
</html>
